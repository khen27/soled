{"version":3,"sources":["webpack:///src/app/deals/details/deals-details.page.ts","webpack:///src/app/deals/details/deals-details.page.html","webpack:///src/app/deals/details/deals-details.resolver.ts","webpack:///src/app/deals/details/deals-details.module.ts"],"names":["DealsDetailsPage","route","slidesOptions","zoom","toggle","subscriptions","data","pipe","resolvedRouteData","extractData","subscribe","state","details","error","console","log","unsubscribe","isShell","selector","templateUrl","styleUrls","DealsDetailsResolver","dealsService","dataSource","getDetailsDataSource","dataStore","getDetailsStore","routes","path","component","resolve","DealsDetailsPageModule","forChild","imports","declarations","providers"],"mappings":"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","file":"deals-details-deals-details-module-es5.js","sourcesContent":["import { Component, OnInit, HostBinding } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { IResolvedRouteData, ResolverHelper } from '../../utils/resolver-helper';\r\nimport { DealsDetailsModel } from './deals-details.model';\r\nimport { switchMap } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-deals-details',\r\n  templateUrl: './deals-details.page.html',\r\n  styleUrls: [\r\n    './styles/deals-details.page.scss',\r\n    './styles/deals-details.shell.scss'\r\n  ]\r\n})\r\nexport class DealsDetailsPage implements OnInit {\r\n  // Gather all component subscription in one place. Can be one Subscription or multiple (chained using the Subscription.add() method)\r\n  subscriptions: Subscription;\r\n\r\n  details: DealsDetailsModel;\r\n  slidesOptions: any = {\r\n    zoom: {\r\n      toggle: false // Disable zooming to prevent weird double tap zomming on slide images\r\n    }\r\n  };\r\n\r\n  @HostBinding('class.is-shell') get isShell() {\r\n    return (this.details && this.details.isShell) ? true : false;\r\n  }\r\n\r\n  constructor(private route: ActivatedRoute) { }\r\n\r\n  ngOnInit(): void {\r\n    this.subscriptions = this.route.data\r\n    .pipe(\r\n      // Extract data for this page\r\n      switchMap((resolvedRouteData: IResolvedRouteData<DealsDetailsModel>) => {\r\n        return ResolverHelper.extractData<DealsDetailsModel>(resolvedRouteData.data, DealsDetailsModel);\r\n      })\r\n    )\r\n    .subscribe((state) => {\r\n      this.details = state;\r\n    }, (error) => console.log(error));\r\n  }\r\n\r\n  // NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\r\n  // Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\r\n  ionViewWillLeave(): void {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar color=\"primary\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"app/categories/deals\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>Deals Details</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"deals-details-content\" [ngClass]=\"{'ended': ((details?.expirationDate | appTimeDifference) < 0), 'imminent-end': ((details?.expirationDate | appTimeDifference) > 0 && (details?.expirationDate | appTimeDifference) <= 2), 'ends-soon': ((details?.expirationDate | appTimeDifference) > 0 && (details?.expirationDate | appTimeDifference) > 2 && (details?.expirationDate | appTimeDifference) < 10), 'distant-end': ((details?.expirationDate | appTimeDifference) >= 10)}\">\r\n  <ion-row class=\"expiration-countdown\" *ngIf=\"((details?.expirationDate | appTimeDifference) > 0 && (details?.expirationDate | appTimeDifference) <= 2)\">\r\n    <span class=\"expiration-lead\">Deal expires in:</span>\r\n    <app-countdown-timer class=\"item-countdown\" fill=\"countdown\" [end]=\"details?.expirationDate\" [units]=\"{from: 'hour', to: 'second'}\"></app-countdown-timer>\r\n  </ion-row>\r\n\r\n  <div class=\"details-wrapper\">\r\n    <ion-row class=\"slider-row\">\r\n      <ion-slides class=\"details-slides\" pager=\"true\" [options]=\"slidesOptions\">\r\n        <ion-slide class=\"\" *ngFor=\"let image of details?.showcaseImages\">\r\n          <ion-row class=\"slide-inner-row\">\r\n            <app-aspect-ratio [ratio]=\"{w: 56, h: 40}\">\r\n              <app-image-shell [src]=\"image\" [alt]=\"'deals details'\" class=\"showcase-image\" animation=\"spinner\"></app-image-shell>\r\n            </app-aspect-ratio>\r\n          </ion-row>\r\n        </ion-slide>\r\n      </ion-slides>\r\n    </ion-row>\r\n    <ion-row class=\"description-row\">\r\n      <ion-col class=\"logo-col\" size=\"6\">\r\n        <app-aspect-ratio [ratio]=\"{w: 128, h: 32}\">\r\n          <app-image-shell [src]=\"details?.logo\" [alt]=\"'deals details'\" class=\"logo-image\" animation=\"spinner\"></app-image-shell>\r\n        </app-aspect-ratio>\r\n      </ion-col>\r\n      <ion-col class=\"info-col\" size=\"9\">\r\n        <h4 class=\"details-name\">\r\n          <app-text-shell animation=\"bouncing\" [data]=\"details?.name\"></app-text-shell>\r\n        </h4>\r\n        <p class=\"details-description\">\r\n          <app-text-shell animation=\"bouncing\" lines=\"3\" [data]=\"details?.description\"></app-text-shell>\r\n        </p>\r\n      </ion-col>\r\n      <ion-col class=\"preview-image-col\" size=\"3\">\r\n        <app-aspect-ratio [ratio]=\"{w: 1, h: 1}\">\r\n          <app-image-shell [src]=\"details?.previewImage\" [alt]=\"'deals details'\" class=\"preview-image\" animation=\"spinner\"></app-image-shell>\r\n        </app-aspect-ratio>\r\n      </ion-col>\r\n    </ion-row>\r\n    <ion-row class=\"promo-row\">\r\n      <h3 class=\"promo-title\">Copy the Code</h3>\r\n      <ion-col size=\"8\">\r\n        <p class=\"promo-description\">\r\n          Paste this code at checkout to get an extra 50% off\r\n        </p>\r\n      </ion-col>\r\n      <ion-col size=\"6\">\r\n        <ion-button class=\"promo-code-btn\" expand=\"block\" shape=\"round\" fill=\"outline\" color=\"claim\">\r\n          <span class=\"promo-code\">\r\n            <app-text-shell [data]=\"details?.code\"></app-text-shell>\r\n          </span>\r\n        </ion-button>\r\n      </ion-col>\r\n      <ion-col size=\"8\">\r\n        <p class=\"promo-instructions\">\r\n          Go to <a class=\"instructions-anchor\" target=\"_blank\" href=\"https://google.com/search?q=chocolate\">lancasternutcandy.com</a> and paste the code at checkout.\r\n        </p>\r\n      </ion-col>\r\n    </ion-row>\r\n    <div class=\"expiration-notice\">\r\n      <span class=\"notice-message\">Cupon {{ ((details?.expirationDate | appTimeDifference) < 0) ? 'expired' : 'expires' }} on:</span>\r\n      <span class=\"expiration-value\">\r\n        <app-text-shell [data]=\"details?.expirationDate | date:'mediumDate'\"></app-text-shell>\r\n      </span>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"related-deals-wrapper\" *ngIf=\"details?.relatedDeals && details.relatedDeals.length > 0\">\r\n    <h3 class=\"related-deals-title\">More hot deals</h3>\r\n    <ion-row class=\"related-deal\" *ngFor=\"let deal of details?.relatedDeals\">\r\n      <ion-col class=\"deal-logo-wrapper\" size=\"4\">\r\n        <app-aspect-ratio [ratio]=\"{w: 1, h: 1}\">\r\n          <app-image-shell [src]=\"deal.logo\" [alt]=\"'deals logo'\" class=\"related-deal-logo\" animation=\"spinner\"></app-image-shell>\r\n        </app-aspect-ratio>\r\n      </ion-col>\r\n      <ion-col class=\"deal-info-wrapper\" size=\"8\">\r\n        <h4 class=\"related-deal-title\">\r\n          <app-text-shell [data]=\"deal?.name\"></app-text-shell>\r\n        </h4>\r\n        <p class=\"related-deal-description\">\r\n          <app-text-shell [data]=\"deal?.description\"></app-text-shell>\r\n        </p>\r\n      </ion-col>\r\n    </ion-row>\r\n  </div>\r\n</ion-content>\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { DataStore } from '../../shell/data-store';\r\nimport { DealsService } from '../deals.service';\r\nimport { DealsDetailsModel } from './deals-details.model';\r\n\r\n@Injectable()\r\nexport class DealsDetailsResolver implements Resolve<DataStore<DealsDetailsModel>> {\r\n\r\n  constructor(private dealsService: DealsService) {}\r\n\r\n  resolve(): DataStore<DealsDetailsModel> {\r\n    const dataSource: Observable<DealsDetailsModel> = this.dealsService.getDetailsDataSource();\r\n    const dataStore: DataStore<DealsDetailsModel> = this.dealsService.getDetailsStore(dataSource);\r\n\r\n    return dataStore;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ComponentsModule } from '../../components/components.module';\r\nimport { PipesModule } from '../../pipes/pipes.module';\r\n\r\nimport { DealsService } from '../deals.service';\r\nimport { DealsDetailsPage } from './deals-details.page';\r\nimport { DealsDetailsResolver } from './deals-details.resolver';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DealsDetailsPage,\r\n    resolve: {\r\n      data: DealsDetailsResolver\r\n    }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    ComponentsModule,\r\n    PipesModule\r\n  ],\r\n  declarations: [\r\n    DealsDetailsPage\r\n  ],\r\n  providers: [\r\n    DealsDetailsResolver,\r\n    DealsService\r\n  ]\r\n})\r\nexport class DealsDetailsPageModule {}\r\n"]}