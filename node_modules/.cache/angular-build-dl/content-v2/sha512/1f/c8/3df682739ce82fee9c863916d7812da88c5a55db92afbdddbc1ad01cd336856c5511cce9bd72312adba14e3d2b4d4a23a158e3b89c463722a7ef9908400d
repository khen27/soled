{"version":3,"sources":["webpack:///src/app/firebase/auth/profile/firebase-profile.page.ts","webpack:///src/app/firebase/auth/profile/firebase-profile.page.html","webpack:///src/app/firebase/auth/profile/firebase-profile.resolver.ts","webpack:///src/app/utils/resolver-helper.ts","webpack:///src/app/firebase/auth/profile/firebase-profile.module.ts"],"names":["FirebaseProfilePage","router","route","authService","subscriptions","data","pipe","resolvedRouteData","extractData","subscribe","state","user","error","console","log","signOut","navigate","replaceUrl","unsubscribe","isShell","selector","templateUrl","styleUrls","FirebaseProfileResolver","firebaseAuthService","dataSource","getProfileDataSource","dataStore","getProfileStore","ResolverHelper","source","constructor","redirectUnauthorizedToLogin","routes","path","component","canActivate","authGuardPipe","resolve","FirebaseProfilePageModule","forChild","imports","declarations","providers"],"mappings":"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","file":"profile-firebase-profile-module-es5.js","sourcesContent":["import { Component, OnInit, HostBinding } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { FirebaseProfileModel } from './firebase-profile.model';\r\nimport { FirebaseAuthService } from '../firebase-auth.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { IResolvedRouteData, ResolverHelper } from '../../../utils/resolver-helper';\r\nimport { switchMap } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-firebase-profile',\r\n  templateUrl: './firebase-profile.page.html',\r\n  styleUrls: [\r\n    './styles/firebase-profile.page.scss',\r\n    './styles/firebase-profile.shell.scss'\r\n  ]\r\n})\r\nexport class FirebaseProfilePage implements OnInit {\r\n  // Gather all component subscription in one place. Can be one Subscription or multiple (chained using the Subscription.add() method)\r\n  subscriptions: Subscription;\r\n  user: FirebaseProfileModel;\r\n\r\n  @HostBinding('class.is-shell') get isShell() {\r\n    return (this.user && this.user.isShell) ? true : false;\r\n  }\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    public authService: FirebaseAuthService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n\r\n    this.subscriptions = this.route.data\r\n    .pipe(\r\n      // Extract data for this page\r\n      switchMap((resolvedRouteData: IResolvedRouteData<FirebaseProfileModel>) => {\r\n        return ResolverHelper.extractData<FirebaseProfileModel>(resolvedRouteData.data, FirebaseProfileModel);\r\n      })\r\n    )\r\n    .subscribe((state) => {\r\n      this.user = state;\r\n    }, (error) => console.log(error));\r\n  }\r\n\r\n  signOut() {\r\n    this.authService.signOut().subscribe(() => {\r\n      // Sign-out successful.\r\n      // Replace state as we are no longer authorized to access profile page.\r\n      this.router.navigate(['firebase/auth/sign-in'], { replaceUrl: true });\r\n    }, (error) => {\r\n      console.log('signout error', error);\r\n    });\r\n  }\r\n\r\n  // NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\r\n  // Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\r\n  ionViewWillLeave(): void {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n","<ion-header class=\"ion-no-border\">\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"app/categories\"></ion-back-button>\r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"user-content\">\r\n  <ion-row>\r\n    <ion-col class=\"ion-no-padding\">\r\n      <app-image-shell class=\"user-image add-overlay\" [display]=\"'cover'\" animation=\"spinner\" [src]=\"user?.image\" [alt]=\"'item image'\">\r\n        <app-aspect-ratio [ratio]=\"{w:1, h:1}\">\r\n        </app-aspect-ratio>\r\n      </app-image-shell>\r\n    </ion-col>\r\n  </ion-row>\r\n\r\n  <ion-row class=\"user-details\">\r\n    <ion-col class=\"ion-no-padding details-wrapper\">\r\n      <h2 class=\"user-name\">\r\n        <app-text-shell [data]=\"user?.name\"></app-text-shell>\r\n        <ion-icon name=\"checkmark-circle\" color=\"bright-pink\"></ion-icon>\r\n      </h2>\r\n      <span class=\"user-role\">\r\n        <app-text-shell [data]=\"user?.role\"></app-text-shell>\r\n      </span>\r\n      <p class=\"user-description\">\r\n        <app-text-shell lines=\"3\" [data]=\"user?.description\"></app-text-shell>\r\n      </p>\r\n    </ion-col>\r\n  </ion-row>\r\n\r\n  <ion-row class=\"user-preferences-wrapper\">\r\n    <ion-col size=\"12\">\r\n      <h4 class=\"preference-name\">Mobile</h4>\r\n      <p class=\"preference-value\">\r\n        <app-text-shell [data]=\"user?.phoneNumber\"></app-text-shell>\r\n      </p>\r\n    </ion-col>\r\n    <ion-col size=\"12\">\r\n      <h4 class=\"preference-name\">Email</h4>\r\n      <p class=\"preference-value\">\r\n        <app-text-shell [data]=\"user?.email\"></app-text-shell>\r\n      </p>\r\n    </ion-col>\r\n    <ion-col size=\"12\">\r\n      <h4 class=\"preference-name\">Auth Provider</h4>\r\n      <p class=\"preference-value\">\r\n        <app-text-shell [data]=\"user?.provider\"></app-text-shell>\r\n      </p>\r\n    </ion-col>\r\n    <ion-col size=\"12\">\r\n      <ion-button class=\"sign-out-btn\" expand=\"block\" fill=\"outline\" color=\"bright-blue\" (click)=\"signOut()\">Sign out</ion-button>\r\n    </ion-col>\r\n  </ion-row>\r\n</ion-content>\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\nimport { FirebaseAuthService } from '../firebase-auth.service';\r\nimport { Observable } from 'rxjs';\r\nimport { DataStore } from '../../../shell/data-store';\r\nimport { FirebaseProfileModel } from './firebase-profile.model';\r\n\r\n@Injectable()\r\nexport class FirebaseProfileResolver implements Resolve<any> {\r\n\r\n  constructor(private firebaseAuthService: FirebaseAuthService) {}\r\n\r\n  resolve() {\r\n    const dataSource: Observable<FirebaseProfileModel> = this.firebaseAuthService.getProfileDataSource();\r\n    const dataStore: DataStore<FirebaseProfileModel> = this.firebaseAuthService.getProfileStore(dataSource);\r\n    return dataStore;\r\n  }\r\n}\r\n","import { DataStore } from '../shell/data-store';\r\nimport { Observable, of } from 'rxjs';\r\n\r\nexport interface IResolvedRouteData<T> {\r\n  data: T | DataStore<T>;\r\n}\r\n\r\nexport class ResolverHelper<T> {\r\n  // More info on function overloads here: https://www.typescriptlang.org/docs/handbook/functions.html#overloads\r\n  public static extractData<T>(source: (T | DataStore<T>), constructor: (new(...args: any[]) => T)): Observable<T> {\r\n    if (source instanceof DataStore) {\r\n      return source.state;\r\n    } else if (source instanceof constructor) {\r\n      // The right side of instanceof should be an expression evaluating to a constructor function (ie. a class), not a type\r\n      // That's why we included an extra parameter which acts as a constructor function for type T\r\n      // (see: https://github.com/microsoft/TypeScript/issues/5236)\r\n      return of(source);\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { ComponentsModule } from '../../../components/components.module';\r\nimport { FirebaseProfilePage } from './firebase-profile.page';\r\nimport { FirebaseProfileResolver } from './firebase-profile.resolver';\r\nimport { AngularFireAuthGuard, redirectUnauthorizedTo } from '@angular/fire/auth-guard';\r\n\r\nconst redirectUnauthorizedToLogin = () => redirectUnauthorizedTo(['/firebase/auth/sign-in']);\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: FirebaseProfilePage,\r\n    canActivate: [AngularFireAuthGuard],\r\n    data: { authGuardPipe: redirectUnauthorizedToLogin },\r\n    resolve: {\r\n      data: FirebaseProfileResolver\r\n    }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    ComponentsModule\r\n  ],\r\n  declarations: [\r\n    FirebaseProfilePage\r\n  ],\r\n  providers: [\r\n    FirebaseProfileResolver\r\n  ]\r\n})\r\nexport class FirebaseProfilePageModule {}\r\n"]}