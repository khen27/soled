{"version":3,"sources":["./src/app/firebase/auth/profile/firebase-profile.page.ts","./src/app/firebase/auth/profile/firebase-profile.page.html","./src/app/firebase/auth/profile/firebase-profile.resolver.ts","./src/app/utils/resolver-helper.ts","./src/app/firebase/auth/profile/firebase-profile.module.ts"],"names":[],"mappings":"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","file":"profile-firebase-profile-module-es2015.js","sourcesContent":["import { Component, OnInit, HostBinding } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { FirebaseProfileModel } from './firebase-profile.model';\r\nimport { FirebaseAuthService } from '../firebase-auth.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { IResolvedRouteData, ResolverHelper } from '../../../utils/resolver-helper';\r\nimport { switchMap } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-firebase-profile',\r\n  templateUrl: './firebase-profile.page.html',\r\n  styleUrls: [\r\n    './styles/firebase-profile.page.scss',\r\n    './styles/firebase-profile.shell.scss'\r\n  ]\r\n})\r\nexport class FirebaseProfilePage implements OnInit {\r\n  // Gather all component subscription in one place. Can be one Subscription or multiple (chained using the Subscription.add() method)\r\n  subscriptions: Subscription;\r\n  user: FirebaseProfileModel;\r\n\r\n  @HostBinding('class.is-shell') get isShell() {\r\n    return (this.user && this.user.isShell) ? true : false;\r\n  }\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    public authService: FirebaseAuthService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n\r\n    this.subscriptions = this.route.data\r\n    .pipe(\r\n      // Extract data for this page\r\n      switchMap((resolvedRouteData: IResolvedRouteData<FirebaseProfileModel>) => {\r\n        return ResolverHelper.extractData<FirebaseProfileModel>(resolvedRouteData.data, FirebaseProfileModel);\r\n      })\r\n    )\r\n    .subscribe((state) => {\r\n      this.user = state;\r\n    }, (error) => console.log(error));\r\n  }\r\n\r\n  signOut() {\r\n    this.authService.signOut().subscribe(() => {\r\n      // Sign-out successful.\r\n      // Replace state as we are no longer authorized to access profile page.\r\n      this.router.navigate(['firebase/auth/sign-in'], { replaceUrl: true });\r\n    }, (error) => {\r\n      console.log('signout error', error);\r\n    });\r\n  }\r\n\r\n  // NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\r\n  // Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\r\n  ionViewWillLeave(): void {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n","<ion-header class=\"ion-no-border\">\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"app/categories\"></ion-back-button>\r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"user-content\">\r\n  <ion-row>\r\n    <ion-col class=\"ion-no-padding\">\r\n      <app-image-shell class=\"user-image add-overlay\" [display]=\"'cover'\" animation=\"spinner\" [src]=\"user?.image\" [alt]=\"'item image'\">\r\n        <app-aspect-ratio [ratio]=\"{w:1, h:1}\">\r\n        </app-aspect-ratio>\r\n      </app-image-shell>\r\n    </ion-col>\r\n  </ion-row>\r\n\r\n  <ion-row class=\"user-details\">\r\n    <ion-col class=\"ion-no-padding details-wrapper\">\r\n      <h2 class=\"user-name\">\r\n        <app-text-shell [data]=\"user?.name\"></app-text-shell>\r\n        <ion-icon name=\"checkmark-circle\" color=\"bright-pink\"></ion-icon>\r\n      </h2>\r\n      <span class=\"user-role\">\r\n        <app-text-shell [data]=\"user?.role\"></app-text-shell>\r\n      </span>\r\n      <p class=\"user-description\">\r\n        <app-text-shell lines=\"3\" [data]=\"user?.description\"></app-text-shell>\r\n      </p>\r\n    </ion-col>\r\n  </ion-row>\r\n\r\n  <ion-row class=\"user-preferences-wrapper\">\r\n    <ion-col size=\"12\">\r\n      <h4 class=\"preference-name\">Mobile</h4>\r\n      <p class=\"preference-value\">\r\n        <app-text-shell [data]=\"user?.phoneNumber\"></app-text-shell>\r\n      </p>\r\n    </ion-col>\r\n    <ion-col size=\"12\">\r\n      <h4 class=\"preference-name\">Email</h4>\r\n      <p class=\"preference-value\">\r\n        <app-text-shell [data]=\"user?.email\"></app-text-shell>\r\n      </p>\r\n    </ion-col>\r\n    <ion-col size=\"12\">\r\n      <h4 class=\"preference-name\">Auth Provider</h4>\r\n      <p class=\"preference-value\">\r\n        <app-text-shell [data]=\"user?.provider\"></app-text-shell>\r\n      </p>\r\n    </ion-col>\r\n    <ion-col size=\"12\">\r\n      <ion-button class=\"sign-out-btn\" expand=\"block\" fill=\"outline\" color=\"bright-blue\" (click)=\"signOut()\">Sign out</ion-button>\r\n    </ion-col>\r\n  </ion-row>\r\n</ion-content>\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\nimport { FirebaseAuthService } from '../firebase-auth.service';\r\nimport { Observable } from 'rxjs';\r\nimport { DataStore } from '../../../shell/data-store';\r\nimport { FirebaseProfileModel } from './firebase-profile.model';\r\n\r\n@Injectable()\r\nexport class FirebaseProfileResolver implements Resolve<any> {\r\n\r\n  constructor(private firebaseAuthService: FirebaseAuthService) {}\r\n\r\n  resolve() {\r\n    const dataSource: Observable<FirebaseProfileModel> = this.firebaseAuthService.getProfileDataSource();\r\n    const dataStore: DataStore<FirebaseProfileModel> = this.firebaseAuthService.getProfileStore(dataSource);\r\n    return dataStore;\r\n  }\r\n}\r\n","import { DataStore } from '../shell/data-store';\r\nimport { Observable, of } from 'rxjs';\r\n\r\nexport interface IResolvedRouteData<T> {\r\n  data: T | DataStore<T>;\r\n}\r\n\r\nexport class ResolverHelper<T> {\r\n  // More info on function overloads here: https://www.typescriptlang.org/docs/handbook/functions.html#overloads\r\n  public static extractData<T>(source: (T | DataStore<T>), constructor: (new(...args: any[]) => T)): Observable<T> {\r\n    if (source instanceof DataStore) {\r\n      return source.state;\r\n    } else if (source instanceof constructor) {\r\n      // The right side of instanceof should be an expression evaluating to a constructor function (ie. a class), not a type\r\n      // That's why we included an extra parameter which acts as a constructor function for type T\r\n      // (see: https://github.com/microsoft/TypeScript/issues/5236)\r\n      return of(source);\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { ComponentsModule } from '../../../components/components.module';\r\nimport { FirebaseProfilePage } from './firebase-profile.page';\r\nimport { FirebaseProfileResolver } from './firebase-profile.resolver';\r\nimport { AngularFireAuthGuard, redirectUnauthorizedTo } from '@angular/fire/auth-guard';\r\n\r\nconst redirectUnauthorizedToLogin = () => redirectUnauthorizedTo(['/firebase/auth/sign-in']);\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: FirebaseProfilePage,\r\n    canActivate: [AngularFireAuthGuard],\r\n    data: { authGuardPipe: redirectUnauthorizedToLogin },\r\n    resolve: {\r\n      data: FirebaseProfileResolver\r\n    }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    ComponentsModule\r\n  ],\r\n  declarations: [\r\n    FirebaseProfilePage\r\n  ],\r\n  providers: [\r\n    FirebaseProfileResolver\r\n  ]\r\n})\r\nexport class FirebaseProfilePageModule {}\r\n"],"sourceRoot":"webpack:///"}