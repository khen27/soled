(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{XxPA:function(e,t,o){"use strict";o.r(t),o.d(t,"RouteResolversUXModule",(function(){return H}));var n=o("ofXK"),s=o("3Pt+"),a=o("tyNb"),r=o("TEn/"),c=o("j1ZV"),i=o("fXoL");const l=function(){return["/showcase/route-resolvers-ux/blocking-resolvers"]},b=function(){return["/showcase/route-resolvers-ux/non-blocking-resolvers"]},u=function(){return["/showcase/route-resolvers-ux/progressive-shell-resolvers"]};let h=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Cb({type:e,selectors:[["app-showcase-route-resolvers-ux"]],decls:52,vars:6,consts:[["color","primary"],["slot","start"],[1,"showcase-content"],[1,"showcase-section"],["expand","block",3,"routerLink"]],template:function(e,t){1&e&&(i.Ob(0,"ion-header"),i.Ob(1,"ion-toolbar",0),i.Ob(2,"ion-buttons",1),i.Jb(3,"ion-menu-button"),i.Nb(),i.Ob(4,"ion-title"),i.vc(5," Improve Route Resolvers UX "),i.Nb(),i.Nb(),i.Nb(),i.Ob(6,"ion-content",2),i.Ob(7,"section",3),i.Ob(8,"p"),i.vc(9," Lets see the difference between the different implementations of Route Resolvers. "),i.Nb(),i.Ob(10,"h5"),i.vc(11,"Blocking Route Resolvers"),i.Nb(),i.Ob(12,"p"),i.vc(13," By default, Angular Route Resolvers won't transition to the page until the Resolver Observable completes. "),i.Nb(),i.Ob(14,"p"),i.vc(15," Let's suppose the backend is slow and takes 5 seconds to fetch data and return it to the client, this is what's going to happen. "),i.Nb(),i.Ob(16,"p"),i.Ob(17,"b"),i.vc(18,"Expected behavior:"),i.Nb(),i.vc(19," Page transition will be delayed 5 seconds until the server sends data back to the client. "),i.Nb(),i.Ob(20,"ion-button",4),i.vc(21,"Blocking Resolvers"),i.Nb(),i.Nb(),i.Ob(22,"section",3),i.Ob(23,"h5"),i.vc(24,"NON-Blocking Route Resolvers"),i.Nb(),i.Ob(25,"p"),i.vc(26," To avoid waiting for the Observable to complete, we can wrap the base Observable (the one we are getting data from) with a dummy Observable, Subject or Promise that emits the base Observable and immediately completes. "),i.Nb(),i.Ob(27,"p"),i.Ob(28,"b"),i.vc(29,"Expected behavior:"),i.Nb(),i.vc(30," Page transition will be instant and the transitioned page will show a blank state while the server sends data back to the client. "),i.Nb(),i.Ob(31,"ion-button",4),i.vc(32,"Non-Blocking Resolvers"),i.Nb(),i.Nb(),i.Ob(33,"section",3),i.Ob(34,"h5"),i.vc(35,"Progressive Shell Resolvers"),i.Nb(),i.Ob(36,"p"),i.vc(37," By using the "),i.Ob(38,"code"),i.vc(39,"DataStore"),i.Nb(),i.vc(40," utility in conjunction with Angular Route Resolvers, we can solve this UX problem and make page transitions immediate. "),i.Nb(),i.Ob(41,"p"),i.vc(42," This approach uses a non-blocking Resolver in conjunction with the "),i.Ob(43,"code"),i.vc(44,"DataStore"),i.Nb(),i.vc(45," utility. "),i.Nb(),i.Ob(46,"p"),i.Ob(47,"b"),i.vc(48,"Expected behavior:"),i.Nb(),i.vc(49," Page transition will be instant and the transitioned page will show some shell elements while the server sends data back to the client. "),i.Nb(),i.Ob(50,"ion-button",4),i.vc(51,"Progressive Shell Resolvers"),i.Nb(),i.Nb(),i.Nb()),2&e&&(i.yb(20),i.fc("routerLink",i.hc(3,l)),i.yb(11),i.fc("routerLink",i.hc(4,b)),i.yb(19),i.fc("routerLink",i.hc(5,u)))},directives:[r.p,r.Y,r.h,r.A,r.W,r.k,r.g,r.gb,a.h],styles:[".showcase-content[_ngcontent-%COMP%]{--background:var(--app-background-shade)}.showcase-content[_ngcontent-%COMP%]   .showcase-section[_ngcontent-%COMP%]{margin:20px 20px 100px}"]}),e})();var v=o("B7gC");function p(e,t){1&e&&(i.Mb(0),i.Ob(1,"div",6),i.Jb(2,"ion-spinner"),i.Ob(3,"p"),i.Ob(4,"b"),i.vc(5,"You can show a static shell while fetching data from the backend"),i.Nb(),i.Nb(),i.Nb(),i.Lb())}const g=function(e){return{"background-image":e}},d=function(){return{w:2,h:1}},O=function(){return{w:1,h:1}};function w(e,t){if(1&e&&(i.Mb(0),i.Ob(1,"ion-row",7),i.Ob(2,"ion-col",8),i.Ob(3,"div",9),i.Ob(4,"app-aspect-ratio",10),i.Ob(5,"h4",11),i.vc(6,"Heading on top of a cover image"),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Ob(7,"ion-col",12),i.Ob(8,"app-aspect-ratio",10),i.Jb(9,"img",13),i.Nb(),i.Nb(),i.Ob(10,"ion-col",14),i.Ob(11,"h3",15),i.vc(12),i.Nb(),i.Ob(13,"p"),i.vc(14),i.Nb(),i.Nb(),i.Nb(),i.Lb()),2&e){const e=i.Yb();i.yb(3),i.fc("ngStyle",i.ic(6,g,"url("+(null==e.routeResolveData?null:e.routeResolveData.cover)+")")),i.yb(1),i.fc("ratio",i.hc(8,d)),i.yb(4),i.fc("ratio",i.hc(9,O)),i.yb(1),i.fc("src",null==e.routeResolveData?null:e.routeResolveData.image,i.pc),i.yb(3),i.xc(" ",null==e.routeResolveData?null:e.routeResolveData.title," "),i.yb(2),i.xc(" ",null==e.routeResolveData?null:e.routeResolveData.description," ")}}let m=(()=>{class e{constructor(e){this.route=e}ngOnInit(){if(console.log("Showcase NON Blocking Resovlers - ngOnInit()"),this.route&&this.route.data){const e=this.route.data;console.log("Showcase NON Blocking Resovlers - Route Resolve Observable => promiseObservable: ",e),e?e.subscribe(e=>{const t=e.data;console.log("Showcase NON Blocking Resovlers - Subscribe to promiseObservable => dataObservable: ",t),t?t.subscribe(e=>{const t=e;console.log("Showcase NON Blocking Resovlers - Subscribe to dataObservable (will emmit just one value) => PageData ("+(t&&t.isShell?"SHELL":"REAL")+"): ",t),t&&(this.routeResolveData=t)}):console.warn("No dataObservable coming from Route Resolver promiseObservable")}):console.warn("No promiseObservable coming from Route Resolver data")}else console.warn("No data coming from Route Resolver")}}return e.\u0275fac=function(t){return new(t||e)(i.Ib(a.a))},e.\u0275cmp=i.Cb({type:e,selectors:[["app-showcase-non-blocking-resolvers"]],decls:12,vars:2,consts:[["color","primary"],["slot","start"],["defaultHref","showcase/route-resolvers-ux"],[1,"showcase-content"],[1,"showcase-section"],[4,"ngIf"],[2,"margin","20px 40px","text-align","center"],[2,"background-color","#FFF","padding","10px"],["size","12"],[2,"background-size","cover","background-repeat","no-repeat",3,"ngStyle"],[3,"ratio"],[2,"margin","10px","text-align","center","color","#FFF"],["size","4"],["alt","Sample Image",2,"width","100%","height","100%",3,"src"],["size","8"],[2,"margin-top","0px"]],template:function(e,t){1&e&&(i.Ob(0,"ion-header"),i.Ob(1,"ion-toolbar",0),i.Ob(2,"ion-buttons",1),i.Jb(3,"ion-back-button",2),i.Nb(),i.Ob(4,"ion-title"),i.vc(5," NON Blocking Resovler Showcase "),i.Nb(),i.Nb(),i.Nb(),i.Ob(6,"ion-content",3),i.Ob(7,"section",4),i.Ob(8,"p"),i.vc(9," With Non-Blocking Resolvers, page transition is immediate. However UX degrades because you are showing a static loading indicator while the server sends data back to the client. "),i.Nb(),i.tc(10,p,6,0,"ng-container",5),i.tc(11,w,15,10,"ng-container",5),i.Nb(),i.Nb()),2&e&&(i.yb(10),i.fc("ngIf",!t.routeResolveData),i.yb(1),i.fc("ngIf",t.routeResolveData))},directives:[r.p,r.Y,r.h,r.d,r.e,r.W,r.k,n.m,r.P,r.H,r.j,n.n,v.a],styles:[".showcase-content[_ngcontent-%COMP%]{--background:var(--app-background-shade)}.showcase-content[_ngcontent-%COMP%]   .showcase-section[_ngcontent-%COMP%]{margin:20px 20px 100px}"]}),e})();const f=function(e){return{"background-image":e}},N=function(){return{w:2,h:1}},R=function(){return{w:1,h:1}};let k=(()=>{class e{constructor(e){this.route=e}ngOnInit(){if(console.log("Showcase Blocking Resovlers - ngOnInit()"),this.route&&this.route.data){const e=this.route.data;console.log("Showcase Blocking Resovlers - Route Resolve Observable => dataObservable: ",e),e?e.subscribe(e=>{const t=e.data;console.log("Showcase Blocking Resovlers - Subscribe to dataObservable (will emmit just one value) => PageData ("+(t&&t.isShell?"SHELL":"REAL")+"): ",t),t&&(this.routeResolveData=t)}):console.warn("No dataObservable coming from Route Resolver data")}else console.warn("No data coming from Route Resolver")}}return e.\u0275fac=function(t){return new(t||e)(i.Ib(a.a))},e.\u0275cmp=i.Cb({type:e,selectors:[["app-showcase-blocking-resolvers"]],decls:27,vars:10,consts:[["color","primary"],["slot","start"],["defaultHref","showcase/route-resolvers-ux"],[1,"showcase-content"],[1,"showcase-section"],[2,"background-color","#FFF","padding","10px"],["size","12"],[2,"background-size","cover","background-repeat","no-repeat",3,"ngStyle"],[3,"ratio"],[2,"margin","10px","text-align","center","color","#FFF"],["size","4"],["alt","Sample Image",2,"width","100%","height","100%",3,"src"],["size","8"],[2,"margin-top","0px"]],template:function(e,t){1&e&&(i.Ob(0,"ion-header"),i.Ob(1,"ion-toolbar",0),i.Ob(2,"ion-buttons",1),i.Jb(3,"ion-back-button",2),i.Nb(),i.Ob(4,"ion-title"),i.vc(5," Blocking Resovler Showcase "),i.Nb(),i.Nb(),i.Nb(),i.Ob(6,"ion-content",3),i.Ob(7,"section",4),i.Ob(8,"p"),i.vc(9," Notice how the UX degrades when using "),i.Ob(10,"b"),i.vc(11,"Blocking"),i.Nb(),i.vc(12," Route Resolvers in Angular "),i.Nb(),i.Ob(13,"ion-row",5),i.Ob(14,"ion-col",6),i.Ob(15,"div",7),i.Ob(16,"app-aspect-ratio",8),i.Ob(17,"h4",9),i.vc(18,"Heading on top of a cover image"),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Ob(19,"ion-col",10),i.Ob(20,"app-aspect-ratio",8),i.Jb(21,"img",11),i.Nb(),i.Nb(),i.Ob(22,"ion-col",12),i.Ob(23,"h3",13),i.vc(24),i.Nb(),i.Ob(25,"p"),i.vc(26),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Nb()),2&e&&(i.yb(15),i.fc("ngStyle",i.ic(6,f,"url("+(null==t.routeResolveData?null:t.routeResolveData.cover)+")")),i.yb(1),i.fc("ratio",i.hc(8,N)),i.yb(4),i.fc("ratio",i.hc(9,R)),i.yb(1),i.fc("src",null==t.routeResolveData?null:t.routeResolveData.image,i.pc),i.yb(3),i.xc(" ",null==t.routeResolveData?null:t.routeResolveData.title," "),i.yb(2),i.xc(" ",null==t.routeResolveData?null:t.routeResolveData.description," "))},directives:[r.p,r.Y,r.h,r.d,r.e,r.W,r.k,r.H,r.j,n.n,v.a],styles:[".showcase-content[_ngcontent-%COMP%]{--background:var(--app-background-shade)}.showcase-content[_ngcontent-%COMP%]   .showcase-section[_ngcontent-%COMP%]{margin:20px 20px 100px}"]}),e})();var y=o("eIep"),S=o("2gss"),D=o("zK/y");const x=function(){return{w:2,h:1}},P=function(){return{w:1,h:1}};let C=(()=>{class e{constructor(e){this.route=e}ngOnInit(){console.log("Showcase Progressive Shell Resovlers - ngOnInit()"),this.route.data.pipe(Object(y.a)(e=>e.data.state)).subscribe(e=>{this.routeResolveData=e},e=>console.log(e))}}return e.\u0275fac=function(t){return new(t||e)(i.Ib(a.a))},e.\u0275cmp=i.Cb({type:e,selectors:[["app-showcase-progressive-shell-resolvers"]],decls:22,vars:11,consts:[["color","primary"],["slot","start"],["defaultHref","showcase/route-resolvers-ux"],[1,"showcase-content"],[1,"showcase-section"],[2,"background-color","#FFF","padding","10px"],["size","12"],["animation","spinner",1,"add-overlay",3,"display","src","alt"],[3,"ratio"],[2,"margin","10px","text-align","center","color","#FFF"],["size","4"],["animation","spinner",3,"src","alt"],["size","8"],[2,"margin-top","0px"],[3,"data"],["animation","bouncing","lines","3",3,"data"]],template:function(e,t){1&e&&(i.Ob(0,"ion-header"),i.Ob(1,"ion-toolbar",0),i.Ob(2,"ion-buttons",1),i.Jb(3,"ion-back-button",2),i.Nb(),i.Ob(4,"ion-title"),i.vc(5," Progressive Shell Showcase "),i.Nb(),i.Nb(),i.Nb(),i.Ob(6,"ion-content",3),i.Ob(7,"section",4),i.Ob(8,"ion-row",5),i.Ob(9,"ion-col",6),i.Ob(10,"app-image-shell",7),i.Ob(11,"app-aspect-ratio",8),i.Ob(12,"h4",9),i.vc(13,"Heading on top of a cover image"),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Ob(14,"ion-col",10),i.Ob(15,"app-aspect-ratio",8),i.Jb(16,"app-image-shell",11),i.Nb(),i.Nb(),i.Ob(17,"ion-col",12),i.Ob(18,"h3",13),i.Jb(19,"app-text-shell",14),i.Nb(),i.Ob(20,"p"),i.Jb(21,"app-text-shell",15),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Nb()),2&e&&(i.yb(10),i.fc("display","cover")("src",null==t.routeResolveData?null:t.routeResolveData.cover)("alt","Sample Image Cover"),i.yb(1),i.fc("ratio",i.hc(9,x)),i.yb(4),i.fc("ratio",i.hc(10,P)),i.yb(1),i.fc("src",null==t.routeResolveData?null:t.routeResolveData.image)("alt","Sample Image"),i.yb(3),i.fc("data",null==t.routeResolveData?null:t.routeResolveData.title),i.yb(2),i.fc("data",null==t.routeResolveData?null:t.routeResolveData.description))},directives:[r.p,r.Y,r.h,r.d,r.e,r.W,r.k,r.H,r.j,S.a,v.a,D.a],styles:[".showcase-content[_ngcontent-%COMP%]{--background:var(--app-background-shade)}.showcase-content[_ngcontent-%COMP%]   .showcase-section[_ngcontent-%COMP%]{margin:20px 20px 100px}"]}),e})();var L=o("mrSG"),j=o("NXyV"),E=o("nYR2"),F=o("5e4S");let I=(()=>{class e{constructor(e,t){this.showcaseService=e,this.loadingController=t}presentLoader(){return Object(L.__awaiter)(this,void 0,void 0,(function*(){this.loadingElement=yield this.loadingController.create({message:"Loading ..."}),yield this.loadingElement.present()}))}dismissLoader(){return Object(L.__awaiter)(this,void 0,void 0,(function*(){this.loadingElement&&(yield this.loadingElement.dismiss())}))}resolve(){const e=this.showcaseService.getDataSourceWithDelay().pipe(Object(E.a)(()=>{console.log("dataObservable COMPLETED - HIDE LOADER"),this.dismissLoader()}));return Object(j.a)(()=>(console.log("dataObservable STARTED - SHOW LOADER"),this.presentLoader(),e))}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(F.a),i.Sb(r.bb))},e.\u0275prov=i.Eb({token:e,factory:e.\u0275fac}),e})(),B=(()=>{class e{constructor(e){this.showcaseService=e}resolve(){const e=this.showcaseService.getDataSourceWithDelay();return new Promise((t,o)=>{t(e)})}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(F.a))},e.\u0275prov=i.Eb({token:e,factory:e.\u0275fac}),e})(),M=(()=>{class e{constructor(e){this.showcaseService=e}resolve(){const e=this.showcaseService.getDataSourceWithDelay();return this.showcaseService.getSimpleDataStore(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(F.a))},e.\u0275prov=i.Eb({token:e,factory:e.\u0275fac}),e})();const _=[{path:"",component:h},{path:"blocking-resolvers",component:k,resolve:{data:I}},{path:"non-blocking-resolvers",component:m,resolve:{data:B}},{path:"progressive-shell-resolvers",component:C,resolve:{data:M}}];let H=(()=>{class e{}return e.\u0275mod=i.Gb({type:e}),e.\u0275inj=i.Fb({factory:function(t){return new(t||e)},providers:[I,B,M,F.a],imports:[[n.c,s.h,r.Z,a.k.forChild(_),c.a]]}),e})()},"f/Ol":function(e,t,o){"use strict";o.d(t,"b",(function(){return b})),o.d(t,"a",(function(){return u}));var n=o("jtHE"),s=o("LRne"),a=o("itXk"),r=o("3E0/"),c=o("lJxs"),i=o("JX91"),l=o("AytR");class b{constructor(){this.isShell=!1}}class u{constructor(e){this.shellModel=e,this.networkDelay=l.a.appShellConfig&&l.a.appShellConfig.networkDelay?l.a.appShellConfig.networkDelay:0,this.timeline=new n.a(1)}static AppendShell(e,t,o=400){const n=Object(s.a)(!0).pipe(Object(r.a)(o));return Object(a.a)([n,e]).pipe(Object(c.a)(([e,t])=>Object.assign(t,{isShell:!1})),Object(i.a)(Object.assign(t,{isShell:!0})))}load(e,t){const o="number"==typeof t?t:this.networkDelay;let n;n=0===o?e:u.AppendShell(e,this.shellModel,o),n.subscribe(e=>{this.timeline.next(e)})}get state(){return this.timeline.asObservable()}}}}]);