(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Wgwc:function(t,e,s){t.exports=function(){"use strict";var t="millisecond",e="second",s="minute",n="hour",r="day",i="week",a="month",o="quarter",c="year",u="date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d+)?$/,h=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f=function(t,e,s){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(s)+t},g={s:f,z:function(t){var e=-t.utcOffset(),s=Math.abs(e),n=Math.floor(s/60),r=s%60;return(e<=0?"+":"-")+f(n,2,"0")+":"+f(r,2,"0")},m:function t(e,s){if(e.date()<s.date())return-t(s,e);var n=12*(s.year()-e.year())+(s.month()-e.month()),r=e.clone().add(n,a),i=s-r<0,o=e.clone().add(n+(i?-1:1),a);return+(-(n+(s-r)/(i?r-o:o-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(l){return{M:a,y:c,w:i,d:r,D:u,h:n,m:s,s:e,ms:t,Q:o}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},p="en",b={};b[p]=d;var S=function(t){return t instanceof O},m=function(t,e,s){var n;if(!t)return p;if("string"==typeof t)b[t]&&(n=t),e&&(b[t]=e,n=t);else{var r=t.name;b[r]=t,n=r}return!s&&n&&(p=n),n||!s&&p},$=function(t,e){if(S(t))return t.clone();var s="object"==typeof e?e:{};return s.date=t,s.args=arguments,new O(s)},v=g;v.l=m,v.i=S,v.w=function(t,e){return $(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var O=function(){function d(t){this.$L=this.$L||m(t.locale,null,!0),this.parse(t)}var f=d.prototype;return f.parse=function(t){this.$d=function(t){var e=t.date,s=t.utc;if(null===e)return new Date(NaN);if(v.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(l);if(n){var r=n[2]-1||0,i=(n[7]||"0").substring(0,3);return s?new Date(Date.UTC(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},f.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},f.$utils=function(){return v},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(t,e){var s=$(t);return this.startOf(e)<=s&&s<=this.endOf(e)},f.isAfter=function(t,e){return $(t)<this.startOf(e)},f.isBefore=function(t,e){return this.endOf(e)<$(t)},f.$g=function(t,e,s){return v.u(t)?this[e]:this.set(s,t)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(t,o){var l=this,h=!!v.u(o)||o,d=v.p(t),f=function(t,e){var s=v.w(l.$u?Date.UTC(l.$y,e,t):new Date(l.$y,e,t),l);return h?s:s.endOf(r)},g=function(t,e){return v.w(l.toDate()[t].apply(l.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(e)),l)},p=this.$W,b=this.$M,S=this.$D,m="set"+(this.$u?"UTC":"");switch(d){case c:return h?f(1,0):f(31,11);case a:return h?f(1,b):f(0,b+1);case i:var $=this.$locale().weekStart||0,O=(p<$?p+7:p)-$;return f(h?S-O:S+(6-O),b);case r:case u:return g(m+"Hours",0);case n:return g(m+"Minutes",1);case s:return g(m+"Seconds",2);case e:return g(m+"Milliseconds",3);default:return this.clone()}},f.endOf=function(t){return this.startOf(t,!1)},f.$set=function(i,o){var l,h=v.p(i),d="set"+(this.$u?"UTC":""),f=(l={},l[r]=d+"Date",l[u]=d+"Date",l[a]=d+"Month",l[c]=d+"FullYear",l[n]=d+"Hours",l[s]=d+"Minutes",l[e]=d+"Seconds",l[t]=d+"Milliseconds",l)[h],g=h===r?this.$D+(o-this.$W):o;if(h===a||h===c){var p=this.clone().set(u,1);p.$d[f](g),p.init(),this.$d=p.set(u,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](g);return this.init(),this},f.set=function(t,e){return this.clone().$set(t,e)},f.get=function(t){return this[v.p(t)]()},f.add=function(t,o){var u,l=this;t=Number(t);var h=v.p(o),d=function(e){var s=$(l);return v.w(s.date(s.date()+Math.round(e*t)),l)};if(h===a)return this.set(a,this.$M+t);if(h===c)return this.set(c,this.$y+t);if(h===r)return d(1);if(h===i)return d(7);var f=(u={},u[s]=6e4,u[n]=36e5,u[e]=1e3,u)[h]||1,g=this.$d.getTime()+t*f;return v.w(g,this)},f.subtract=function(t,e){return this.add(-1*t,e)},f.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var s=t||"YYYY-MM-DDTHH:mm:ssZ",n=v.z(this),r=this.$locale(),i=this.$H,a=this.$m,o=this.$M,c=r.weekdays,u=r.months,l=function(t,n,r,i){return t&&(t[n]||t(e,s))||r[n].substr(0,i)},d=function(t){return v.s(i%12||12,t,"0")},f=r.meridiem||function(t,e,s){var n=t<12?"AM":"PM";return s?n.toLowerCase():n},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:v.s(o+1,2,"0"),MMM:l(r.monthsShort,o,u,3),MMMM:l(u,o),D:this.$D,DD:v.s(this.$D,2,"0"),d:String(this.$W),dd:l(r.weekdaysMin,this.$W,c,2),ddd:l(r.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:v.s(i,2,"0"),h:d(1),hh:d(2),a:f(i,a,!0),A:f(i,a,!1),m:String(a),mm:v.s(a,2,"0"),s:String(this.$s),ss:v.s(this.$s,2,"0"),SSS:v.s(this.$ms,3,"0"),Z:n};return s.replace(h,(function(t,e){return e||g[t]||n.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(t,u,l){var h,d=v.p(u),f=$(t),g=6e4*(f.utcOffset()-this.utcOffset()),p=this-f,b=v.m(this,f);return b=(h={},h[c]=b/12,h[a]=b,h[o]=b/3,h[i]=(p-g)/6048e5,h[r]=(p-g)/864e5,h[n]=p/36e5,h[s]=p/6e4,h[e]=p/1e3,h)[d]||p,l?b:v.a(b)},f.daysInMonth=function(){return this.endOf(a).$D},f.$locale=function(){return b[this.$L]},f.locale=function(t,e){if(!t)return this.$L;var s=this.clone(),n=m(t,e,!0);return n&&(s.$L=n),s},f.clone=function(){return v.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},d}(),w=O.prototype;return $.prototype=w,[["$ms",t],["$s",e],["$m",s],["$H",n],["$W",r],["$M",a],["$y",c],["$D",u]].forEach((function(t){w[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),$.extend=function(t,e){return t(e,O,$),$},$.locale=m,$.isDayjs=S,$.unix=function(t){return $(1e3*t)},$.en=b[p],$.Ls=b,$}()},X1WR:function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));var n=s("f/Ol");class r extends n.b{constructor(){super()}}},"f/Ol":function(t,e,s){"use strict";s.d(e,"b",(function(){return l})),s.d(e,"a",(function(){return h}));var n=s("jtHE"),r=s("LRne"),i=s("itXk"),a=s("3E0/"),o=s("lJxs"),c=s("JX91"),u=s("AytR");class l{constructor(){this.isShell=!1}}class h{constructor(t){this.shellModel=t,this.networkDelay=u.a.appShellConfig&&u.a.appShellConfig.networkDelay?u.a.appShellConfig.networkDelay:0,this.timeline=new n.a(1)}static AppendShell(t,e,s=400){const n=Object(r.a)(!0).pipe(Object(a.a)(s));return Object(i.a)([n,t]).pipe(Object(o.a)(([t,e])=>Object.assign(e,{isShell:!1})),Object(c.a)(Object.assign(e,{isShell:!0})))}load(t,e){const s="number"==typeof e?e:this.networkDelay;let n;n=0===s?t:h.AppendShell(t,this.shellModel,s),n.subscribe(t=>{this.timeline.next(t)})}get state(){return this.timeline.asObservable()}}},izws:function(t,e,s){"use strict";s.d(e,"a",(function(){return v}));var n=s("fXoL"),r=s("itXk"),i=s("LRne"),a=s("cp0P"),o=s("z6cu"),c=s("lJxs"),u=s("bOdf"),l=s("SxV6"),h=s("pLZG"),d=s("Wgwc"),f=s("f/Ol"),g=s("X1WR"),p=s("pXCI");class b extends f.b{constructor(){super()}}var S=s("O2zu"),m=s("ofXK"),$=s("I/3d");let v=(()=>{class t{constructor(t,e,s){this.platformId=t,this.transferStateHelper=e,this.afs=s}getListingDataSource(){const t=this.afs.collection("users").valueChanges({idField:"id"}).pipe(Object(c.a)(t=>t.map(t=>{const e=this.calcUserAge(t.birthdate);return Object.assign({age:e},t)})));return this.transferStateHelper.checkDataSourceState("firebase-listing-state",t)}getListingStore(t){if(!this.listingDataStore){const e=[new g.a,new g.a,new g.a,new g.a,new g.a,new g.a];this.listingDataStore=new f.a(e),Object(m.u)(this.platformId)||t.ssr_state?this.listingDataStore.load(t,0):this.listingDataStore.load(t)}return this.listingDataStore}searchUsersByAge(t,e){const s=d(Date.now()).subtract(e,"year").unix(),n=d(Date.now()).subtract(t,"year").unix();return this.afs.collection("users",t=>t.orderBy("birthdate").startAt(s).endAt(n)).valueChanges({idField:"id"}).pipe(Object(c.a)(t=>t.map(t=>{const e=this.calcUserAge(t.birthdate);return Object.assign({age:e},t)})))}getCombinedUserDataSource(t){const e=this.getUser(t).pipe(Object(u.a)(t=>{if(t&&t.skills){const e=t.skills.map(t=>this.getSkill(t).pipe(Object(l.a)()));return Object(r.a)([Object(i.a)(t),Object(a.a)(e)]).pipe(Object(c.a)(([t,e])=>Object.assign(Object.assign({},t),{skills:e})))}return Object(o.a)("User does not have any skills.")}));return this.transferStateHelper.checkDataSourceState(`firebase-user-${t}-state`,e)}getCombinedUserStore(t){const e=new p.a;return this.combinedUserDataStore=new f.a(e),Object(m.u)(this.platformId)||t.ssr_state?this.combinedUserDataStore.load(t,0):this.combinedUserDataStore.load(t),this.combinedUserDataStore}getRelatedUsersDataSource(t,e){const s=t.pipe(Object(h.a)(t=>!t.isShell),Object(u.a)(t=>t&&t.skills?this.getUsersWithSameSkill(t.id,t.skills):Object(o.a)("Could not get related user")));return this.transferStateHelper.checkDataSourceState(`firebase-user-${e}-related-users-state`,s)}getRelatedUsersStore(t){const e=[new g.a,new g.a,new g.a];return this.relatedUsersDataStore=new f.a(e),Object(m.u)(this.platformId)||t.ssr_state?this.relatedUsersDataStore.load(t,0):this.relatedUsersDataStore.load(t),this.relatedUsersDataStore}createUser(t){return this.afs.collection("users").add(Object.assign({},t))}updateUser(t){return this.afs.collection("users").doc(t.id).set(t)}deleteUser(t){return this.afs.collection("users").doc(t).delete()}getAvatarsDataSource(){return this.afs.collection("avatars").valueChanges()}getAvatarsStore(t){if(!this.avatarsDataStore){const e=[new b,new b,new b,new b,new b];this.avatarsDataStore=new f.a(e),this.avatarsDataStore.load(t)}return this.avatarsDataStore}getSkills(){return this.afs.collection("skills").valueChanges({idField:"id"})}getSkill(t){return this.afs.doc("skills/"+t).snapshotChanges().pipe(Object(c.a)(t=>{const e=t.payload.data();return Object.assign({id:t.payload.id},e)}))}getUser(t){return this.afs.doc("users/"+t).snapshotChanges().pipe(Object(c.a)(t=>{const e=t.payload.data(),s=t.payload.id,n=e?this.calcUserAge(e.birthdate):0;return Object.assign({id:s,age:n},e)}))}getUsersWithSameSkill(t,e){const s=e.map(t=>this.afs.collection("users",e=>e.where("skills","array-contains",t.id)).valueChanges({idField:"id"}));return Object(r.a)(s).pipe(Object(c.a)(e=>[].concat(...e).reduce((e,s)=>e.findIndex(t=>t.id===s.id)<0&&s.id!==t?[...e,s]:e,[])))}calcUserAge(t){return d(Date.now()).diff(d.unix(t),"year")}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(n.B),n.Sb(S.b),n.Sb($.a))},t.\u0275prov=n.Eb({token:t,factory:t.\u0275fac}),t})()},j7gE:function(t,e,s){"use strict";s.d(e,"a",(function(){return h}));var n=s("izws"),r=s("fXoL"),i=s("TEn/"),a=s("ofXK"),o=s("2gss"),c=s("B7gC");const u=function(){return{w:1,h:1}};function l(t,e){if(1&t){const t=r.Pb();r.Ob(0,"ion-col",7),r.Ob(1,"app-image-shell",8),r.Wb("click",(function(){r.oc(t);const s=e.$implicit;return r.Yb().dismissModal(s)})),r.Jb(2,"app-aspect-ratio",9),r.Nb(),r.Nb()}if(2&t){const t=e.$implicit;r.yb(1),r.fc("display","cover")("src",t.link)("alt","avatar image"),r.yb(1),r.fc("ratio",r.hc(4,u))}}let h=(()=>{class t{constructor(t,e){this.modalController=t,this.firebaseCrudService=e}get isShell(){return!(!this.avatars||!this.avatars.isShell)}ngOnInit(){const t=this.firebaseCrudService.getAvatarsDataSource();this.firebaseCrudService.getAvatarsStore(t).state.subscribe(t=>{this.avatars=t},t=>{})}dismissModal(t){this.modalController.dismiss(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(i.hb),r.Ib(n.a))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-select-user-image"]],hostVars:2,hostBindings:function(t,e){2&t&&r.Ab("is-shell",e.isShell)},decls:10,vars:1,consts:[["color","primary"],["slot","end"],[3,"click"],["slot","icon-only","name","close"],[1,"select-image-content"],[1,"images-wrapper"],["size","4","class","image-item",4,"ngFor","ngForOf"],["size","4",1,"image-item"],["animation","spinner",1,"user-image",3,"display","src","alt","click"],[3,"ratio"]],template:function(t,e){1&t&&(r.Ob(0,"ion-header"),r.Ob(1,"ion-toolbar",0),r.Ob(2,"ion-buttons",1),r.Ob(3,"ion-button",2),r.Wb("click",(function(){return e.dismissModal()})),r.Jb(4,"ion-icon",3),r.Nb(),r.Nb(),r.Ob(5,"ion-title"),r.vc(6,"Select an Avatar"),r.Nb(),r.Nb(),r.Nb(),r.Ob(7,"ion-content",4),r.Ob(8,"ion-row",5),r.tc(9,l,3,5,"ion-col",6),r.Nb(),r.Nb()),2&t&&(r.yb(9),r.fc("ngForOf",e.avatars))},directives:[i.u,i.cb,i.i,i.h,i.v,i.ab,i.p,i.L,a.l,i.o,o.a,c.a],styles:["[_nghost-%COMP%]{--page-margin:var(--app-fair-margin);--page-background:var(--app-background)}.select-image-content[_ngcontent-%COMP%]{--background:var(--page-background)}.select-image-content[_ngcontent-%COMP%]   .images-wrapper[_ngcontent-%COMP%]{--ion-grid-column-padding:calc(var(--page-margin) / 2);padding:calc(var(--page-margin) / 2)}","app-image-shell.user-image[_ngcontent-%COMP%]{--image-shell-border-radius:var(--app-fair-radius)}"]}),t})()},k8ID:function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var n=s("TEn/"),r=s("ofXK"),i=s("j1ZV"),a=s("3Pt+"),o=s("fXoL");let c=(()=>{class t{}return t.\u0275mod=o.Gb({type:t}),t.\u0275inj=o.Fb({factory:function(e){return new(e||t)},imports:[[n.db,r.c,i.a,a.h,a.o]]}),t})()},pXCI:function(t,e,s){"use strict";s.d(e,"b",(function(){return i})),s.d(e,"a",(function(){return a}));var n=s("f/Ol");class r extends n.b{constructor(){super()}}class i extends n.b{constructor(){super(),this.skills=["","",""],this.languages={spanish:0,english:0,french:0}}}class a extends i{constructor(){super(),this.skills=[new r,new r,new r]}}},ypRl:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));class n{static minSelectedCheckboxes(t){return e=>e.controls.map(t=>t.value).reduce((t,e)=>e?t+e:t,0)>=t?null:{required:!0}}}}}]);