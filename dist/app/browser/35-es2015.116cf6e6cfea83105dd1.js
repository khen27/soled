(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{ROOv:function(t,n,e){"use strict";e.r(n),e.d(n,"FirebaseSignInPageModule",(function(){return C}));var i=e("ofXK"),o=e("3Pt+"),r=e("tyNb"),a=e("TEn/"),s=e("mrSG"),c=e("1oPy"),g=e("T7tK"),l=e("fXoL"),b=e("A0kb");function d(t,n){if(1&t&&(l.Ob(0,"div",22),l.Jb(1,"ion-icon",23),l.Ob(2,"span"),l.vc(3),l.Nb(),l.Nb()),2&t){const t=l.Yb().$implicit;l.yb(3),l.wc(t.message)}}function u(t,n){if(1&t&&(l.Mb(0),l.tc(1,d,4,1,"div",21),l.Lb()),2&t){const t=n.$implicit,e=l.Yb();l.yb(1),l.fc("ngIf",e.loginForm.get("email").hasError(t.type)&&(e.loginForm.get("email").dirty||e.loginForm.get("email").touched))}}function h(t,n){if(1&t&&(l.Ob(0,"div",22),l.Jb(1,"ion-icon",23),l.Ob(2,"span"),l.vc(3),l.Nb(),l.Nb()),2&t){const t=l.Yb().$implicit;l.yb(3),l.wc(t.message)}}function p(t,n){if(1&t&&(l.Mb(0),l.tc(1,h,4,1,"div",21),l.Lb()),2&t){const t=n.$implicit,e=l.Yb();l.yb(1),l.fc("ngIf",e.loginForm.get("password").hasError(t.type)&&(e.loginForm.get("password").dirty||e.loginForm.get("password").touched))}}function m(t,n){if(1&t&&(l.Ob(0,"div",9),l.Ob(1,"div",22),l.Jb(2,"ion-icon",23),l.Ob(3,"span"),l.vc(4),l.Nb(),l.Nb(),l.Nb()),2&t){const t=l.Yb();l.yb(4),l.wc(t.submitError)}}const f=function(){return["/firebase/auth/sign-up"]};let v=(()=>{class t{constructor(t,n,e,i,r,a,s){this.router=t,this.route=n,this.authService=e,this.ngZone=i,this.loadingController=r,this.location=a,this.historyHelper=s,this.validation_messages={email:[{type:"required",message:"Email is required."},{type:"pattern",message:"Enter a valid email."}],password:[{type:"required",message:"Password is required."},{type:"minlength",message:"Password must be at least 6 characters long."}]},this.loginForm=new o.e({email:new o.c("",o.q.compose([o.q.required,o.q.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new o.c("",o.q.compose([o.q.minLength(6),o.q.required]))}),this.authRedirectResult=this.authService.getRedirectResult().subscribe(t=>{t.user?this.redirectLoggedUserToProfilePage():t.error&&this.manageAuthWithProvidersErrors(t.error)}),this.route.queryParams.subscribe(t=>{const n=t["auth-redirect"];n&&this.presentLoading(n)})}ngOnDestroy(){this.dismissLoading()}redirectLoggedUserToProfilePage(){this.dismissLoading(),this.ngZone.run(()=>{this.router.navigate(["firebase/auth/profile"],{replaceUrl:!0})})}presentLoading(t){return Object(s.__awaiter)(this,void 0,void 0,(function*(){const n=t[0].toUpperCase()+t.slice(1);this.loadingController.create({message:t?"Signing in with "+n:"Signin in ..."}).then(t=>{this.location.path().includes("auth-redirect")&&(this.redirectLoader=t,this.redirectLoader.present())})}))}dismissLoading(){return Object(s.__awaiter)(this,void 0,void 0,(function*(){this.redirectLoader&&(yield this.redirectLoader.dismiss())}))}prepareForAuthWithProvidersRedirection(t){this.presentLoading(t),this.location.replaceState(this.location.path(),"auth-redirect="+t,this.location.getState())}manageAuthWithProvidersErrors(t){this.submitError=t,this.location.replaceState(this.router.url.split("?")[0],""),this.dismissLoading()}resetSubmitError(){this.submitError=null}signInWithEmail(){this.resetSubmitError(),this.authService.signInWithEmail(this.loginForm.value.email,this.loginForm.value.password).then(t=>{this.redirectLoggedUserToProfilePage()}).catch(t=>{this.submitError=t.message,this.dismissLoading()})}doFacebookLogin(){this.resetSubmitError(),this.prepareForAuthWithProvidersRedirection("facebook"),this.authService.signInWithFacebook().subscribe(t=>{this.redirectLoggedUserToProfilePage()},t=>{this.manageAuthWithProvidersErrors(t.message)})}doGoogleLogin(){this.resetSubmitError(),this.prepareForAuthWithProvidersRedirection("google"),this.authService.signInWithGoogle().subscribe(t=>{this.redirectLoggedUserToProfilePage()},t=>{console.log(t),this.manageAuthWithProvidersErrors(t.message)})}doTwitterLogin(){this.resetSubmitError(),this.prepareForAuthWithProvidersRedirection("twitter"),this.authService.signInWithTwitter().subscribe(t=>{this.redirectLoggedUserToProfilePage()},t=>{console.log(t),this.manageAuthWithProvidersErrors(t.message)})}}return t.\u0275fac=function(n){return new(n||t)(l.Ib(r.g),l.Ib(r.a),l.Ib(g.a),l.Ib(l.z),l.Ib(a.hb),l.Ib(i.i),l.Ib(c.a))},t.\u0275cmp=l.Cb({type:t,selectors:[["app-firebase-sign-in"]],decls:34,vars:7,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","app/categories"],[1,"login-content"],[1,"auth-title"],[3,"formGroup","ngSubmit"],["lines","full",1,"inputs-list"],[1,"input-item"],["type","email","placeholder","Email","formControlName","email","clearInput","","autocapitalize","off","inputmode","email"],[1,"error-container"],[4,"ngFor","ngForOf"],["type","password","placeholder","Password","formControlName","password"],["type","submit","expand","block",1,"login-btn",3,"disabled"],["class","error-container",4,"ngIf"],[1,"other-auth-options-row"],["fill","clear",1,"signup-btn",3,"routerLink"],[1,"social-auth-options"],[1,"options-divider"],["expand","block","color","facebook",1,"social-auth-btn","facebook-auth-btn",3,"click"],["expand","block","color","google",1,"social-auth-btn","google-auth-btn",3,"click"],["expand","block","color","twitter",1,"social-auth-btn","twitter-auth-btn",3,"click"],["class","error-message",4,"ngIf"],[1,"error-message"],["name","information-circle-outline"]],template:function(t,n){1&t&&(l.Ob(0,"ion-header",0),l.Ob(1,"ion-toolbar"),l.Ob(2,"ion-buttons",1),l.Jb(3,"ion-back-button",2),l.Nb(),l.Nb(),l.Nb(),l.Ob(4,"ion-content",3),l.Ob(5,"h2",4),l.vc(6," Sign In with Firebase "),l.Jb(7,"br"),l.Nb(),l.Ob(8,"form",5),l.Wb("ngSubmit",(function(){return n.signInWithEmail()})),l.Ob(9,"ion-list",6),l.Ob(10,"ion-item",7),l.Jb(11,"ion-input",8),l.Nb(),l.Ob(12,"div",9),l.tc(13,u,2,1,"ng-container",10),l.Nb(),l.Ob(14,"ion-item",7),l.Ob(15,"app-show-hide-password"),l.Jb(16,"ion-input",11),l.Nb(),l.Nb(),l.Ob(17,"div",9),l.tc(18,p,2,1,"ng-container",10),l.Nb(),l.Nb(),l.Ob(19,"ion-button",12),l.vc(20,"Log In"),l.Nb(),l.tc(21,m,5,1,"div",13),l.Ob(22,"ion-row",14),l.Ob(23,"ion-button",15),l.vc(24," Sign Up! "),l.Nb(),l.Nb(),l.Nb(),l.Ob(25,"div",16),l.Ob(26,"p",17),l.vc(27,"Or"),l.Nb(),l.Ob(28,"ion-button",18),l.Wb("click",(function(){return n.doFacebookLogin()})),l.vc(29,"Log In with Facebook"),l.Nb(),l.Ob(30,"ion-button",19),l.Wb("click",(function(){return n.doGoogleLogin()})),l.vc(31,"Log In with Google"),l.Nb(),l.Ob(32,"ion-button",20),l.Wb("click",(function(){return n.doTwitterLogin()})),l.vc(33,"Log In with Twitter"),l.Nb(),l.Nb(),l.Nb()),2&t&&(l.yb(8),l.fc("formGroup",n.loginForm),l.yb(5),l.fc("ngForOf",n.validation_messages.email),l.yb(5),l.fc("ngForOf",n.validation_messages.password),l.yb(1),l.fc("disabled",!n.loginForm.valid),l.yb(2),l.fc("ngIf",n.submitError),l.yb(2),l.fc("routerLink",l.hc(6,f)))},directives:[a.v,a.eb,a.i,a.e,a.f,a.q,o.r,o.m,o.f,a.D,a.z,a.y,a.ob,o.l,o.d,i.l,b.a,a.h,i.m,a.N,a.mb,r.h,a.w],styles:["[_nghost-%COMP%]{--page-margin:var(--app-broad-margin);--page-background:var(--app-background-shade)}.login-content[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{--background:var(--page-background)}.login-content[_ngcontent-%COMP%]{--padding-start:var(--page-margin);--padding-end:var(--page-margin);--padding-top:var(--page-margin);--padding-bottom:var(--page-margin)}.login-content[_ngcontent-%COMP%]   .auth-title[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-weight:700;margin-top:calc(var(--page-margin) / 2);margin-bottom:calc(var(--page-margin) * (3/2));letter-spacing:.6px}.login-content[_ngcontent-%COMP%]   .inputs-list[_ngcontent-%COMP%]{--ion-item-background:var(--page-background)}.login-content[_ngcontent-%COMP%]   .inputs-list[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]{--padding-start:0px;--padding-end:0px;--inner-padding-end:0px}.login-content[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin:calc(var(--page-margin) / 2) 0;display:flex;align-items:center;color:var(--ion-color-danger);font-size:14px}.login-content[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{-webkit-padding-end:calc(var(--page-margin) / 2);padding-inline-end:calc(var(--page-margin) / 2)}.login-content[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{margin:calc(var(--page-margin) / 2) 0}.login-content[_ngcontent-%COMP%]   .other-auth-options-row[_ngcontent-%COMP%]{justify-content:flex-end;align-items:center}.login-content[_ngcontent-%COMP%]   .other-auth-options-row[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]{--color:var(--ion-color-secondary);margin:0}.login-content[_ngcontent-%COMP%]   .other-auth-options-row[_ngcontent-%COMP%]   .signup-btn[_ngcontent-%COMP%]:focus{outline:none}.login-content[_ngcontent-%COMP%]   .social-auth-options[_ngcontent-%COMP%]   .options-divider[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:var(--page-margin) 0;text-align:center}.login-content[_ngcontent-%COMP%]   .social-auth-options[_ngcontent-%COMP%]   .social-auth-btn[_ngcontent-%COMP%]{margin:0}.login-content[_ngcontent-%COMP%]   .social-auth-options[_ngcontent-%COMP%]   .social-auth-btn[_ngcontent-%COMP%]:not(:first-child){margin-top:var(--page-margin)}"]}),t})();var O=e("j1ZV"),P=e("HTFn"),w=e("lJxs");const _=[{path:"",component:v,canActivate:[P.a],data:{authGuardPipe:t=>Object(w.a)(n=>!(null!==n&&!t.queryParams["auth-redirect"])||["firebase/auth/profile"])}}];let C=(()=>{class t{}return t.\u0275mod=l.Gb({type:t}),t.\u0275inj=l.Fb({factory:function(n){return new(n||t)},imports:[[i.c,o.h,o.o,a.fb,r.k.forChild(_),O.a]]}),t})()}}]);