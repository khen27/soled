{"version":3,"sources":["./src/app/deals/details/deals-details.page.ts","./src/app/deals/details/deals-details.page.html","./src/app/deals/details/deals-details.resolver.ts","./src/app/deals/details/deals-details.module.ts"],"names":[],"mappings":"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","file":"deals-details-deals-details-module-es2015.js","sourcesContent":["import { Component, OnInit, HostBinding } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { IResolvedRouteData, ResolverHelper } from '../../utils/resolver-helper';\r\nimport { DealsDetailsModel } from './deals-details.model';\r\nimport { switchMap } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-deals-details',\r\n  templateUrl: './deals-details.page.html',\r\n  styleUrls: [\r\n    './styles/deals-details.page.scss',\r\n    './styles/deals-details.shell.scss'\r\n  ]\r\n})\r\nexport class DealsDetailsPage implements OnInit {\r\n  // Gather all component subscription in one place. Can be one Subscription or multiple (chained using the Subscription.add() method)\r\n  subscriptions: Subscription;\r\n\r\n  details: DealsDetailsModel;\r\n  slidesOptions: any = {\r\n    zoom: {\r\n      toggle: false // Disable zooming to prevent weird double tap zomming on slide images\r\n    }\r\n  };\r\n\r\n  @HostBinding('class.is-shell') get isShell() {\r\n    return (this.details && this.details.isShell) ? true : false;\r\n  }\r\n\r\n  constructor(private route: ActivatedRoute) { }\r\n\r\n  ngOnInit(): void {\r\n    this.subscriptions = this.route.data\r\n    .pipe(\r\n      // Extract data for this page\r\n      switchMap((resolvedRouteData: IResolvedRouteData<DealsDetailsModel>) => {\r\n        return ResolverHelper.extractData<DealsDetailsModel>(resolvedRouteData.data, DealsDetailsModel);\r\n      })\r\n    )\r\n    .subscribe((state) => {\r\n      this.details = state;\r\n    }, (error) => console.log(error));\r\n  }\r\n\r\n  // NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\r\n  // Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\r\n  ionViewWillLeave(): void {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar color=\"primary\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"app/categories/deals\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>Deals Details</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"deals-details-content\" [ngClass]=\"{'ended': ((details?.expirationDate | appTimeDifference) < 0), 'imminent-end': ((details?.expirationDate | appTimeDifference) > 0 && (details?.expirationDate | appTimeDifference) <= 2), 'ends-soon': ((details?.expirationDate | appTimeDifference) > 0 && (details?.expirationDate | appTimeDifference) > 2 && (details?.expirationDate | appTimeDifference) < 10), 'distant-end': ((details?.expirationDate | appTimeDifference) >= 10)}\">\r\n  <ion-row class=\"expiration-countdown\" *ngIf=\"((details?.expirationDate | appTimeDifference) > 0 && (details?.expirationDate | appTimeDifference) <= 2)\">\r\n    <span class=\"expiration-lead\">Deal expires in:</span>\r\n    <app-countdown-timer class=\"item-countdown\" fill=\"countdown\" [end]=\"details?.expirationDate\" [units]=\"{from: 'hour', to: 'second'}\"></app-countdown-timer>\r\n  </ion-row>\r\n\r\n  <div class=\"details-wrapper\">\r\n    <ion-row class=\"slider-row\">\r\n      <ion-slides class=\"details-slides\" pager=\"true\" [options]=\"slidesOptions\">\r\n        <ion-slide class=\"\" *ngFor=\"let image of details?.showcaseImages\">\r\n          <ion-row class=\"slide-inner-row\">\r\n            <app-aspect-ratio [ratio]=\"{w: 56, h: 40}\">\r\n              <app-image-shell [src]=\"image\" [alt]=\"'deals details'\" class=\"showcase-image\" animation=\"spinner\"></app-image-shell>\r\n            </app-aspect-ratio>\r\n          </ion-row>\r\n        </ion-slide>\r\n      </ion-slides>\r\n    </ion-row>\r\n    <ion-row class=\"description-row\">\r\n      <ion-col class=\"logo-col\" size=\"6\">\r\n        <app-aspect-ratio [ratio]=\"{w: 128, h: 32}\">\r\n          <app-image-shell [src]=\"details?.logo\" [alt]=\"'deals details'\" class=\"logo-image\" animation=\"spinner\"></app-image-shell>\r\n        </app-aspect-ratio>\r\n      </ion-col>\r\n      <ion-col class=\"info-col\" size=\"9\">\r\n        <h4 class=\"details-name\">\r\n          <app-text-shell animation=\"bouncing\" [data]=\"details?.name\"></app-text-shell>\r\n        </h4>\r\n        <p class=\"details-description\">\r\n          <app-text-shell animation=\"bouncing\" lines=\"3\" [data]=\"details?.description\"></app-text-shell>\r\n        </p>\r\n      </ion-col>\r\n      <ion-col class=\"preview-image-col\" size=\"3\">\r\n        <app-aspect-ratio [ratio]=\"{w: 1, h: 1}\">\r\n          <app-image-shell [src]=\"details?.previewImage\" [alt]=\"'deals details'\" class=\"preview-image\" animation=\"spinner\"></app-image-shell>\r\n        </app-aspect-ratio>\r\n      </ion-col>\r\n    </ion-row>\r\n    <ion-row class=\"promo-row\">\r\n      <h3 class=\"promo-title\">Copy the Code</h3>\r\n      <ion-col size=\"8\">\r\n        <p class=\"promo-description\">\r\n          Paste this code at checkout to get an extra 50% off\r\n        </p>\r\n      </ion-col>\r\n      <ion-col size=\"6\">\r\n        <ion-button class=\"promo-code-btn\" expand=\"block\" shape=\"round\" fill=\"outline\" color=\"claim\">\r\n          <span class=\"promo-code\">\r\n            <app-text-shell [data]=\"details?.code\"></app-text-shell>\r\n          </span>\r\n        </ion-button>\r\n      </ion-col>\r\n      <ion-col size=\"8\">\r\n        <p class=\"promo-instructions\">\r\n          Go to <a class=\"instructions-anchor\" target=\"_blank\" href=\"https://google.com/search?q=chocolate\">lancasternutcandy.com</a> and paste the code at checkout.\r\n        </p>\r\n      </ion-col>\r\n    </ion-row>\r\n    <div class=\"expiration-notice\">\r\n      <span class=\"notice-message\">Cupon {{ ((details?.expirationDate | appTimeDifference) < 0) ? 'expired' : 'expires' }} on:</span>\r\n      <span class=\"expiration-value\">\r\n        <app-text-shell [data]=\"details?.expirationDate | date:'mediumDate'\"></app-text-shell>\r\n      </span>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"related-deals-wrapper\" *ngIf=\"details?.relatedDeals && details.relatedDeals.length > 0\">\r\n    <h3 class=\"related-deals-title\">More hot deals</h3>\r\n    <ion-row class=\"related-deal\" *ngFor=\"let deal of details?.relatedDeals\">\r\n      <ion-col class=\"deal-logo-wrapper\" size=\"4\">\r\n        <app-aspect-ratio [ratio]=\"{w: 1, h: 1}\">\r\n          <app-image-shell [src]=\"deal.logo\" [alt]=\"'deals logo'\" class=\"related-deal-logo\" animation=\"spinner\"></app-image-shell>\r\n        </app-aspect-ratio>\r\n      </ion-col>\r\n      <ion-col class=\"deal-info-wrapper\" size=\"8\">\r\n        <h4 class=\"related-deal-title\">\r\n          <app-text-shell [data]=\"deal?.name\"></app-text-shell>\r\n        </h4>\r\n        <p class=\"related-deal-description\">\r\n          <app-text-shell [data]=\"deal?.description\"></app-text-shell>\r\n        </p>\r\n      </ion-col>\r\n    </ion-row>\r\n  </div>\r\n</ion-content>\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { DataStore } from '../../shell/data-store';\r\nimport { DealsService } from '../deals.service';\r\nimport { DealsDetailsModel } from './deals-details.model';\r\n\r\n@Injectable()\r\nexport class DealsDetailsResolver implements Resolve<DataStore<DealsDetailsModel>> {\r\n\r\n  constructor(private dealsService: DealsService) {}\r\n\r\n  resolve(): DataStore<DealsDetailsModel> {\r\n    const dataSource: Observable<DealsDetailsModel> = this.dealsService.getDetailsDataSource();\r\n    const dataStore: DataStore<DealsDetailsModel> = this.dealsService.getDetailsStore(dataSource);\r\n\r\n    return dataStore;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ComponentsModule } from '../../components/components.module';\r\nimport { PipesModule } from '../../pipes/pipes.module';\r\n\r\nimport { DealsService } from '../deals.service';\r\nimport { DealsDetailsPage } from './deals-details.page';\r\nimport { DealsDetailsResolver } from './deals-details.resolver';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DealsDetailsPage,\r\n    resolve: {\r\n      data: DealsDetailsResolver\r\n    }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    ComponentsModule,\r\n    PipesModule\r\n  ],\r\n  declarations: [\r\n    DealsDetailsPage\r\n  ],\r\n  providers: [\r\n    DealsDetailsResolver,\r\n    DealsService\r\n  ]\r\n})\r\nexport class DealsDetailsPageModule {}\r\n"],"sourceRoot":"webpack:///"}