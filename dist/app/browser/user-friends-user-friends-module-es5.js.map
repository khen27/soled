{"version":3,"sources":["webpack:///src/app/user/friends/user-friends.resolver.ts","webpack:///src/app/user/friends/user-friends.module.ts","webpack:///src/app/user/friends/user-friends.page.ts","webpack:///src/app/user/friends/user-friends.page.html"],"names":["UserFriendsResolver","userService","dataSource","getFriendsDataSource","dataStore","getFriendsStore","routes","path","component","resolve","data","UserFriendsPageModule","forChild","imports","declarations","providers","UserFriendsPage","route","segmentValue","searchQuery","showFilters","subscriptions","pipe","resolvedRouteData","extractData","subscribe","state","friendsList","friends","followersList","followers","followingList","following","error","console","log","ev","detail","value","searchList","query","filterList","list","filter","item","name","toLowerCase","includes","unsubscribe","isShell","segmentChanged","selector","templateUrl","styleUrls"],"mappings":"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","file":"user-friends-user-friends-module-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { DataStore } from '../../shell/data-store';\r\nimport { UserService } from '../user.service';\r\nimport { UserFriendsModel } from './user-friends.model';\r\n\r\n@Injectable()\r\nexport class UserFriendsResolver implements Resolve<DataStore<UserFriendsModel>> {\r\n\r\n  constructor(private userService: UserService) { }\r\n\r\n  resolve(): DataStore<UserFriendsModel> {\r\n    const dataSource: Observable<UserFriendsModel> = this.userService.getFriendsDataSource();\r\n    const dataStore: DataStore<UserFriendsModel> = this.userService.getFriendsStore(dataSource);\r\n\r\n    return dataStore;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ComponentsModule } from '../../components/components.module';\r\n\r\nimport { UserService } from '../user.service';\r\nimport { UserFriendsPage } from './user-friends.page';\r\nimport { UserFriendsResolver } from './user-friends.resolver';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: UserFriendsPage,\r\n    resolve: {\r\n      data: UserFriendsResolver\r\n    }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    IonicModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    ComponentsModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [UserFriendsPage],\r\n  providers: [\r\n    UserFriendsResolver,\r\n    UserService\r\n  ]\r\n})\r\nexport class UserFriendsPageModule {}\r\n","import { Component, OnInit, HostBinding } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { IResolvedRouteData, ResolverHelper } from '../../utils/resolver-helper';\r\nimport { UserFriendsModel } from './user-friends.model';\r\nimport { switchMap } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-user-friends',\r\n  templateUrl: './user-friends.page.html',\r\n  styleUrls: [\r\n    './styles/user-friends.page.scss',\r\n    './styles/user-friends.shell.scss',\r\n    './styles/user-friends.ios.scss',\r\n    './styles/user-friends.md.scss'\r\n  ]\r\n})\r\nexport class UserFriendsPage implements OnInit {\r\n  // Gather all component subscription in one place. Can be one Subscription or multiple (chained using the Subscription.add() method)\r\n  subscriptions: Subscription;\r\n\r\n  data: UserFriendsModel;\r\n\r\n  segmentValue = 'friends';\r\n  friendsList: Array<any>;\r\n  followersList: Array<any>;\r\n  followingList: Array<any>;\r\n  searchQuery = '';\r\n  showFilters = false;\r\n\r\n  @HostBinding('class.is-shell') get isShell() {\r\n    return (this.data && this.data.isShell) ? true : false;\r\n  }\r\n\r\n  constructor(private route: ActivatedRoute) { }\r\n\r\n  ngOnInit(): void {\r\n    this.subscriptions = this.route.data\r\n    .pipe(\r\n      // Extract data for this page\r\n      switchMap((resolvedRouteData: IResolvedRouteData<UserFriendsModel>) => {\r\n        return ResolverHelper.extractData<UserFriendsModel>(resolvedRouteData.data, UserFriendsModel);\r\n      })\r\n    )\r\n    .subscribe((state) => {\r\n      this.data = state;\r\n      this.friendsList = this.data.friends;\r\n      this.followersList = this.data.followers;\r\n      this.followingList = this.data.following;\r\n    }, (error) => console.log(error));\r\n  }\r\n\r\n  segmentChanged(ev): void {\r\n    this.segmentValue = ev.detail.value;\r\n\r\n    // Check if there's any filter and apply it\r\n    this.searchList();\r\n  }\r\n\r\n  searchList(): void {\r\n    const query = (this.searchQuery && this.searchQuery !== null) ? this.searchQuery : '';\r\n\r\n    if (this.segmentValue === 'friends') {\r\n      this.friendsList = this.filterList(this.data.friends, query);\r\n    } else if (this.segmentValue === 'followers') {\r\n      this.followersList = this.filterList(this.data.followers, query);\r\n    } else if (this.segmentValue === 'following') {\r\n      this.followingList = this.filterList(this.data.following, query);\r\n    }\r\n  }\r\n\r\n  filterList(list, query): Array<any> {\r\n    return list.filter(item => item.name.toLowerCase().includes(query.toLowerCase()));\r\n  }\r\n\r\n  // NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\r\n  // Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\r\n  ionViewWillLeave(): void {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n","<ion-header class=\"ion-no-border\">\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"app/user\"></ion-back-button>\r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"user-friends-content\">\r\n  <ion-segment value=\"friends\" class=\"user-friends-segment\" (ionChange)=\"segmentChanged($event)\">\r\n    <ion-segment-button value=\"friends\">\r\n      <ion-label>Friends</ion-label>\r\n    </ion-segment-button>\r\n    <ion-segment-button value=\"followers\">\r\n      <ion-label>Followers</ion-label>\r\n    </ion-segment-button>\r\n    <ion-segment-button value=\"following\">\r\n      <ion-label>Following</ion-label>\r\n    </ion-segment-button>\r\n  </ion-segment>\r\n\r\n  <ion-searchbar class=\"friends-searchbar\" animated [(ngModel)]=\"searchQuery\" (ionChange)=\"searchList()\"></ion-searchbar>\r\n\r\n  <ng-template #friendItem let-friend=\"friend\">\r\n    <ion-row class=\"user-details-section\">\r\n      <ion-col class=\"user-image-wrapper\" size=\"2\">\r\n        <app-aspect-ratio [ratio]=\"{w:1, h:1}\">\r\n          <app-image-shell class=\"user-image\" animation=\"spinner\" [src]=\"friend.image\" [alt]=\"'friend'\"></app-image-shell>\r\n        </app-aspect-ratio>\r\n      </ion-col>\r\n      <ion-col class=\"user-data-wrapper\">\r\n        <div class=\"user-info\">\r\n          <h3 class=\"user-name\">\r\n            <app-text-shell [data]=\"friend.name\"></app-text-shell>\r\n          </h3>\r\n          <h5 class=\"user-job\">\r\n            <app-text-shell [data]=\"friend.job\"></app-text-shell>\r\n          </h5>\r\n        </div>\r\n      </ion-col>\r\n      <ion-col class=\"user-actions-wrapper\">\r\n        <ion-button *ngIf=\"!friend.following\" class=\"user-action\" expand=\"block\" size=\"small\" color=\"primary\">Follow</ion-button>\r\n        <ion-button *ngIf=\"friend.following\" class=\"user-action\" expand=\"block\" size=\"small\" color=\"light\">Following</ion-button>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ng-template>\r\n\r\n  <section [hidden]=\"segmentValue !== 'friends'\">\r\n    <ion-list class=\"friends-list\" *ngIf=\"friendsList.length > 0\">\r\n      <ion-item class=\"friend-item\" *ngFor=\"let friend of friendsList\">\r\n        <ng-container *ngTemplateOutlet=\"friendItem; context: { friend: friend }\"></ng-container>\r\n      </ion-item>\r\n    </ion-list>\r\n    <ng-container *ngIf=\"friendsList.length <= 0\">\r\n      <h3 class=\"empty-list-message\">No Friends</h3>\r\n    </ng-container>\r\n  </section>\r\n\r\n  <section [hidden]=\"segmentValue !== 'followers'\">\r\n    <ion-list class=\"friends-list\" *ngIf=\"followersList.length > 0\">\r\n      <ion-item class=\"friend-item\" *ngFor=\"let friend of followersList\">\r\n        <ng-container *ngTemplateOutlet=\"friendItem; context: { friend: friend }\"></ng-container>\r\n      </ion-item>\r\n    </ion-list>\r\n    <ng-container *ngIf=\"followersList.length <= 0\">\r\n      <h3 class=\"empty-list-message\">No Followers</h3>\r\n    </ng-container>\r\n  </section>\r\n\r\n  <section [hidden]=\"segmentValue !== 'following'\">\r\n    <ion-list class=\"friends-list\" *ngIf=\"followingList.length > 0\">\r\n      <ion-item class=\"friend-item\" *ngFor=\"let friend of followingList\">\r\n        <ng-container *ngTemplateOutlet=\"friendItem; context: { friend: friend }\"></ng-container>\r\n      </ion-item>\r\n    </ion-list>\r\n    <ng-container *ngIf=\"followingList.length <= 0\">\r\n      <h3 class=\"empty-list-message\">No Following</h3>\r\n    </ng-container>\r\n  </section>\r\n</ion-content>\r\n"]}